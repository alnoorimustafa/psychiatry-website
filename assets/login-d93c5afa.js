import{W as L,ae as B,aw as F,ax as N,l as m,a3 as P,q as i,a5 as T,d as U,k as E,o as A,b as J,w as d,S as b,M,av as _,s as c,V as O,x as V,n as v,E as k,y as z,ay as W,R as x,J as C,az as $,aA as j,aB as q}from"./index-69c81a8a.js";import{u as S,m as G,a as H,b as I}from"./route-block-929a5824.js";function y(t){this.message=t}y.prototype=new Error,y.prototype.name="InvalidCharacterError";var R=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new y("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,l,o=0,s=0,f="";l=e.charAt(s++);~l&&(r=o%4?64*r+l:l,o++%4)?f+=String.fromCharCode(255&r>>(-2*o&6)):0)l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l);return f};function K(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(R(r).replace(/(.)/g,function(l,o){var s=o.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return R(e)}}function g(t){this.message=t}function Q(t,e){if(typeof t!="string")throw new g("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(K(t.split(".")[r]))}catch(l){throw new g("Invalid token specified: "+l.message)}}g.prototype=new Error,g.prototype.name="InvalidTokenError";const X=L()({name:"VForm",props:{...B(),...F()},emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:r,emit:l}=e;const o=N(t),s=m();function f(n){n.preventDefault(),o.reset()}function h(n){const a=n,u=o.validate();a.then=u.then.bind(u),a.catch=u.catch.bind(u),a.finally=u.finally.bind(u),l("submit",a),a.defaultPrevented||u.then(p=>{var w;let{valid:D}=p;D&&((w=s.value)==null||w.submit())}),a.preventDefault()}return P(()=>{var n;return i("form",{ref:s,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:f,onSubmit:h},[(n=r.default)==null?void 0:n.call(r,o)])}),T(o,s)}}),Y="/assets/auth-v2-login-illustration-bordered-dark-a595a9b7.png",Z="/assets/auth-v2-login-illustration-bordered-light-47ee3625.png",ee="/assets/auth-v2-login-illustration-dark-0878e8b9.png",te="/assets/auth-v2-login-illustration-light-d1fd488d.png",ae={class:"text-h5 mb-1"},ne={class:"text-capitalize"},oe=v("p",{class:"mb-0"}," Please sign-in to your account or contact Dr.Uday to provide you with your credentials ",-1),se=U({__name:"login",setup(t){S(te,ee,Z,Y,!0),S(H,G);const e=m(!1),r=E(),l=m(),o=m(),s=m(),f=async()=>{try{const n=await q.post("login",{username:o.value,password:s.value});if(n){const a=Q(n.data);localStorage.setItem("userData",JSON.stringify(a)),localStorage.setItem("accessToken",JSON.stringify(n.data)),r.replace("/")}}catch(n){console.log(n)}},h=()=>{var n;(n=l.value)==null||n.validate().then(({valid:a})=>{a&&f()})};return(n,a)=>{const u=j;return A(),J(x,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:d(()=>[i(b,{cols:"12",lg:"12",class:"auth-card-v2 d-flex align-center justify-center"},{default:d(()=>[i(M,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:d(()=>[i(_,null,{default:d(()=>[i(c(O),{nodes:c(V).app.logo,class:"mb-6"},null,8,["nodes"]),v("h5",ae,[k(" Welcome to "),v("span",ne,z(c(V).app.title),1)]),oe]),_:1}),i(_,null,{default:d(()=>[i(c(X),{ref_key:"refVForm",ref:l,onSubmit:W(h,["prevent"])},{default:d(()=>[i(x,null,{default:d(()=>[i(b,{cols:"12"},{default:d(()=>[i(u,{modelValue:c(o),"onUpdate:modelValue":a[0]||(a[0]=p=>C(o)?o.value=p:null),label:"Username",type:"email",autofocus:""},null,8,["modelValue"])]),_:1}),i(b,{cols:"12"},{default:d(()=>[i(u,{modelValue:c(s),"onUpdate:modelValue":a[1]||(a[1]=p=>C(s)?s.value=p:null),class:"mb-5",label:"Password",type:c(e)?"text":"password","append-inner-icon":c(e)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=p=>e.value=!c(e))},null,8,["modelValue","type","append-inner-icon"]),i($,{block:"",type:"submit"},{default:d(()=>[k(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}});typeof I=="function"&&I(se);export{se as default};
