import{W as B,ae as F,av as N,aw as P,l as m,a3 as T,q as i,a5 as U,d as E,k as M,o as A,b as J,w as u,S as y,M as O,ax as V,s as d,V as W,x as k,n as h,E as x,y as C,ay as z,R as S,J as I,az as $,aA as j,aB as q}from"./index-5154db80.js";import{u as R,m as G,a as H,b as D}from"./route-block-f8538a6f.js";function w(a){this.message=a}w.prototype=new Error,w.prototype.name="InvalidCharacterError";var L=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(a){var t=String(a).replace(/=+$/,"");if(t.length%4==1)throw new w("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,l,n=0,s=0,f="";l=t.charAt(s++);~l&&(r=n%4?64*r+l:l,n++%4)?f+=String.fromCharCode(255&r>>(-2*n&6)):0)l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(l);return f};function K(a){var t=a.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(L(r).replace(/(.)/g,function(l,n){var s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(t)}catch{return L(t)}}function b(a){this.message=a}function Q(a,t){if(typeof a!="string")throw new b("Invalid token specified");var r=(t=t||{}).header===!0?0:1;try{return JSON.parse(K(a.split(".")[r]))}catch(l){throw new b("Invalid token specified: "+l.message)}}b.prototype=new Error,b.prototype.name="InvalidTokenError";const X=B()({name:"VForm",props:{...F(),...N()},emits:{"update:modelValue":a=>!0,submit:a=>!0},setup(a,t){let{slots:r,emit:l}=t;const n=P(a),s=m();function f(c){c.preventDefault(),n.reset()}function v(c){const o=c,e=n.validate();o.then=e.then.bind(e),o.catch=e.catch.bind(e),o.finally=e.finally.bind(e),l("submit",o),o.defaultPrevented||e.then(g=>{var _;let{valid:p}=g;p&&((_=s.value)==null||_.submit())}),o.preventDefault()}return T(()=>{var c;return i("form",{ref:s,class:["v-form",a.class],style:a.style,novalidate:!0,onReset:f,onSubmit:v},[(c=r.default)==null?void 0:c.call(r,n)])}),U(n,s)}}),Y="/assets/auth-v2-login-illustration-bordered-dark-a595a9b7.png",Z="/assets/auth-v2-login-illustration-bordered-light-47ee3625.png",ee="/assets/auth-v2-login-illustration-dark-0878e8b9.png",te="/assets/auth-v2-login-illustration-light-d1fd488d.png",ae={class:"text-h5 mb-1"},oe={class:"text-capitalize"},ne=h("p",{class:"mb-0"}," Please sign-in to your account or contact Dr.Uday to provide you with your credentials ",-1),se={style:{color:"crimson"}},re=E({__name:"login",setup(a){R(te,ee,Z,Y,!0),R(H,G);const t=m(!1),r=M(),l=m(),n=m(),s=m(),f=m(""),v=async()=>{try{const o=await q.post("login",{username:n.value,password:s.value});if(o&&o.data){const e=Q(o.data);console.log(e),localStorage.setItem("userData",JSON.stringify(e)),localStorage.setItem("accessToken",JSON.stringify(o.data)),r.replace("/")}}catch(o){f.value="Wrong username or password",console.log(o)}},c=()=>{var o;(o=l.value)==null||o.validate().then(({valid:e})=>{e&&v()})};return(o,e)=>{const g=j;return A(),J(S,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:u(()=>[i(y,{cols:"12",lg:"12",class:"auth-card-v2 d-flex align-center justify-center"},{default:u(()=>[i(O,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:u(()=>[i(V,null,{default:u(()=>[i(d(W),{nodes:d(k).app.logo,class:"mb-6"},null,8,["nodes"]),h("h5",ae,[x(" Welcome to "),h("span",oe,C(d(k).app.title),1)]),ne]),_:1}),i(V,null,{default:u(()=>[i(d(X),{ref_key:"refVForm",ref:l,onSubmit:z(c,["prevent"])},{default:u(()=>[i(S,null,{default:u(()=>[i(y,{cols:"12"},{default:u(()=>[i(g,{modelValue:d(n),"onUpdate:modelValue":e[0]||(e[0]=p=>I(n)?n.value=p:null),label:"Username",type:"email",autofocus:""},null,8,["modelValue"])]),_:1}),i(y,{cols:"12"},{default:u(()=>[i(g,{modelValue:d(s),"onUpdate:modelValue":e[1]||(e[1]=p=>I(s)?s.value=p:null),class:"mb-5",label:"Password",type:d(t)?"text":"password","append-inner-icon":d(t)?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=p=>t.value=!d(t))},null,8,["modelValue","type","append-inner-icon"]),h("p",se,C(d(f)),1),i($,{block:"",type:"submit"},{default:u(()=>[x(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}});typeof D=="function"&&D(re);export{re as default};
